<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CIDB Specialist Malaysia | Premium Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        
        body { 
            background-color: #020617; 
            font-family: 'Plus Jakarta Sans', sans-serif;
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        .tech-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, #1e293b 0%, #020617 100%);
            z-index: -1;
        }

        .tech-bg::after {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: linear-gradient(rgba(59, 130, 246, 0.03) 1px, transparent 1px), 
                              linear-gradient(90deg, rgba(59, 130, 246, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        .card { 
            background: rgba(15, 23, 42, 0.9); 
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 32px; 
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8); 
        }

        .selection-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.1);
            background: rgba(15, 23, 42, 0.9);
        }

        .selection-card:hover {
            transform: scale(1.05);
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.15);
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.2);
        }

        .tab-active { background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; }
        .tab-inactive { background: #1e293b; color: #94a3b8; }
        
        select, input { background-color: #020617 !important; color: white !important; border: 1px solid #334155 !important; outline: none; }

        .discount-badge {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            padding: 4px 12px;
            border-radius: 99px;
            font-size: 10px;
            font-weight: 900;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
        }

        .hidden-section { display: none; }
    </style>
</head>
<body class="p-4 md:p-12">
    <div class="tech-bg"></div>

    <div id="selection-screen" class="max-w-4xl mx-auto py-8 relative z-10">
        <div class="text-center mb-10">
            <h1 class="text-5xl md:text-7xl font-extrabold text-white mb-4">CIDB<span class="text-blue-500 italic">Smart Portal</span></h1>
            <p class="text-slate-400 text-lg">Select professional service to begin.</p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div onclick="showService('reg-choice')" class="selection-card p-6 md:p-8 rounded-[32px] text-center">
                <i class="fas fa-layer-group text-2xl text-blue-500 mb-4"></i>
                <h3 class="text-xl font-black">Company Registration</h3>
            </div>
            <div onclick="showService('card-choice')" class="selection-card p-6 md:p-8 rounded-[32px] text-center">
                <i class="fas fa-id-badge text-2xl text-emerald-500 mb-4"></i>
                <h3 class="text-xl font-black">Personnel Green Card</h3>
            </div>
        </div>
    </div>

    <div id="service-container" class="max-w-xl mx-auto hidden-section relative z-10">
        <button id="universal-back" onclick="goBack()" class="mb-6 text-slate-500 hover:text-white transition flex items-center font-bold uppercase text-[10px] tracking-widest">
            <i class="fas fa-chevron-left mr-2"></i> Back
        </button>

        <div id="section-reg-choice" class="hidden-section space-y-4">
            <h2 class="text-2xl font-black text-center mb-6 uppercase">Registration Type</h2>
            <div onclick="setType('new')" class="selection-card p-8 rounded-[32px] text-center">
                <h3 class="text-xl font-bold">New Registration</h3>
            </div>
            <div onclick="setType('renew')" class="selection-card p-8 rounded-[32px] text-center">
                <h3 class="text-xl font-bold">License Renewal</h3>
            </div>
        </div>

        <div id="section-card-choice" class="hidden-section space-y-4">
            <h2 class="text-2xl font-black text-center mb-6 uppercase">Personnel Type</h2>
            <div onclick="setGCType('local')" class="selection-card p-8 rounded-[32px] text-center">
                <h3 class="text-xl font-bold">Local (MyKad)</h3>
            </div>
            <div onclick="setGCType('foreign')" class="selection-card p-8 rounded-[32px] text-center">
                <h3 class="text-xl font-bold">Foreign Worker</h3>
            </div>
        </div>

        <div id="section-reg" class="card overflow-hidden hidden-section">
            <div class="p-6 md:p-10">
                <select id="grade" onchange="calc()" class="w-full p-5 rounded-2xl text-2xl font-black text-center mb-8">
                    <option value="G1">Grade G1</option><option value="G2">Grade G2</option>
                    <option value="G3">Grade G3</option><option value="G4">Grade G4</option>
                    <option value="G5">Grade G5</option><option value="G6">Grade G6</option>
                    <option value="G7">Grade G7</option>
                </select>

                <div class="grid grid-cols-2 gap-4 mb-8 text-center">
                    <div class="p-4 bg-slate-900/80 rounded-2xl">
                        <p class="text-[10px] text-blue-400 font-bold uppercase">Capital</p>
                        <p id="req-capital" class="font-black text-white text-lg">-</p>
                    </div>
                    <div class="p-4 bg-slate-900/80 rounded-2xl">
                        <p class="text-[10px] text-emerald-400 font-bold uppercase">Limit</p>
                        <p id="req-capacity" class="font-black text-white text-lg">-</p>
                    </div>
                </div>

                <div class="space-y-4 mb-8">
                    <select id="years" onchange="calc()" class="w-full p-4 rounded-xl font-bold">
                        <option value="1">1 Year</option><option value="2">2 Years</option><option value="3">3 Years</option>
                    </select>
                    
                    <div id="renewal-options" class="space-y-3">
                        <label class="flex items-center p-4 bg-orange-500/5 rounded-2xl border border-orange-500/20 cursor-pointer">
                            <input type="checkbox" id="score" onchange="calc()" class="w-6 h-6 rounded-lg accent-orange-500">
                            <div class="ml-4">
                                <span class="block font-bold text-orange-200 text-sm">Score Certificate Processing</span>
                                <span class="text-[10px] text-orange-300/60 font-black">+ RM 350 FEE</span>
                            </div>
                        </label>
                        <label class="flex items-center p-4 bg-blue-500/5 rounded-2xl border border-blue-500/20 cursor-pointer">
                            <input type="checkbox" id="cims-recovery" onchange="calc()" class="w-6 h-6 rounded-lg accent-blue-600">
                            <div class="ml-4">
                                <span class="block font-bold text-blue-200 text-sm">CIMS ID/Password Recovery</span>
                                <span class="text-[10px] text-blue-300/60 font-black">+ RM 200 (Requires SSM/CIDB Cert & IC)</span>
                            </div>
                        </label>
                        <label class="flex items-center p-4 bg-red-500/5 rounded-2xl border border-red-500/20 cursor-pointer">
                            <input type="checkbox" id="blacklist" onchange="calc()" class="w-6 h-6 rounded-lg accent-red-600">
                            <div class="ml-4">
                                <span class="block font-black text-red-400 text-sm">Blacklist Resolution</span>
                                <span id="blacklist-fee-text" class="text-[10px] text-red-300/60 font-bold"></span>
                            </div>
                        </label>
                    </div>
                </div>

                <ul id="req-docs" class="mb-8 grid grid-cols-1 gap-2 text-[11px] font-bold text-slate-400"></ul>

                <div class="bg-slate-900 rounded-[35px] p-8 text-center border-t border-white/10">
                    <p class="text-blue-400 text-[10px] font-black uppercase mb-2">Estimated Total</p>
                    <div id="price-display" class="text-5xl font-black text-white tracking-tighter">RM 0</div>
                    <p id="breakdown-text" class="text-slate-400 text-[10px] font-bold mt-2 uppercase"></p>
                </div>
                <a href="#" id="wa-button" class="w-full mt-6 flex items-center justify-center bg-green-600 text-white font-black py-5 rounded-[24px] text-xl">
                    <i class="fab fa-whatsapp text-3xl mr-3"></i> CONSULT SPECIALIST
                </a>
            </div>
        </div>

        <div id="section-card" class="card p-6 md:p-10 hidden-section">
            <h2 id="gc-title" class="text-3xl font-black text-center mb-8 italic uppercase text-emerald-500">Local Card</h2>
            
            <div class="space-y-6">
                <div id="gc-qty-box" class="hidden-section">
                    <label class="text-[10px] font-black text-slate-500 uppercase">Quantity of Workers</label>
                    <input type="number" id="gc-qty" value="1" min="1" oninput="calcGC()" class="w-full p-5 rounded-2xl text-2xl font-black">
                </div>

                <div id="gc-years-box">
                    <label class="block text-[10px] font-black text-slate-500 mb-3 uppercase">Validity Period</label>
                    <select id="gc-years" onchange="calcGC()" class="w-full p-4 rounded-xl font-bold">
                        <option value="1">1 Year</option><option value="2">2 Years</option><option value="3">3 Years</option><option value="4">4 Years</option><option value="5">5 Years</option>
                    </select>
                </div>

                <label class="flex items-center p-5 bg-blue-500/5 border border-blue-500/10 rounded-2xl cursor-pointer">
                    <input type="checkbox" id="gc-recovery" onchange="calcGC()" class="w-6 h-6 rounded-lg accent-blue-600">
                    <div class="ml-4">
                        <span class="block font-bold text-blue-200 text-sm">CIMS Account Recovery</span>
                        <span class="text-[10px] text-blue-300/60 font-black">+ RM 200 (ID/Password Assistance)</span>
                    </div>
                </label>

                <div class="bg-slate-900 rounded-[35px] p-8 text-center border-t border-white/10 relative">
                    <div id="gc-discount-calc" class="hidden mb-2">
                        <p class="text-[10px] text-slate-500 line-through" id="gc-old-price"></p>
                        <p class="text-[11px] text-emerald-400 font-bold" id="gc-savings-text"></p>
                    </div>
                    <p class="text-emerald-400 text-[10px] font-black uppercase mb-1">Final Service Fee</p>
                    <div id="gc-price" class="text-5xl font-black text-white tracking-tighter">RM 0</div>
                    <p id="gc-desc" class="text-slate-400 text-[10px] font-bold mt-2 uppercase"></p>
                </div>

                <a href="#" id="wa-button-gc" class="w-full flex items-center justify-center bg-green-600 text-white font-black py-5 rounded-[24px] text-xl">
                    <i class="fab fa-whatsapp text-3xl mr-3"></i> INQUIRE NOW
                </a>
            </div>
        </div>
    </div>

    <script>
        const phone = "60123420658";
        let currentPath = 'root'; // root, reg-choice, card-choice, calculator
        let currentType = 'new', gcType = 'local';

        const gradeData = {
            "G1": { new: 255, renew: 320, capital: "5,000", capacity: "200,000", blacklist: 700, docs: ["Director MyKad Copy", "SSM Business Profile", "Latest Bank Statement"] },
            "G2": { new: 575, renew: 510, capital: "25,000", capacity: "500,000", blacklist: 700, docs: ["Director MyKad Copy", "SSM Business Profile", "Latest Bank Statement"] },
            "G3": { new: 1015, renew: 695, capital: "50,000", capacity: "1 Million", blacklist: 700, docs: ["Director MyKad Copy", "SSM Business Profile", "Latest Bank Statement"] },
            "G4": { new: 1450, renew: 910, capital: "150,000", capacity: "3 Million", blacklist: 950, docs: ["Director MyKad Copy", "SSM Business Profile", "Latest Bank Statement"] },
            "G5": { new: 2060, renew: 970, capital: "250,000", capacity: "5 Million", blacklist: 1500, docs: ["Director MyKad Copy", "SSM Full Set", "Latest Bank Statement", "Technical Personnel"] },
            "G6": { new: 2665, renew: 1210, capital: "500,000", capacity: "10 Million", blacklist: 2000, docs: ["Director MyKad Copy", "SSM Full Set", "Latest Bank Statement", "Technical Personnel"] },
            "G7": { new: 3025, renew: 1815, capital: "750,000", capacity: "NO LIMIT", blacklist: 2000, docs: ["Director MyKad Copy", "SSM Full Set", "Latest Bank Statement", "2x Tech Personnel"] }
        };

        function showService(s) {
            document.getElementById('selection-screen').classList.add('hidden-section');
            document.getElementById('service-container').classList.remove('hidden-section');
            document.getElementById('section-reg-choice').classList.toggle('hidden-section', s !== 'reg-choice');
            document.getElementById('section-card-choice').classList.toggle('hidden-section', s !== 'card-choice');
            document.getElementById('section-reg').classList.add('hidden-section');
            document.getElementById('section-card').classList.add('hidden-section');
            currentPath = s;
        }

        function goBack() {
            if (currentPath === 'reg-choice' || currentPath === 'card-choice') {
                document.getElementById('selection-screen').classList.remove('hidden-section');
                document.getElementById('service-container').classList.add('hidden-section');
                currentPath = 'root';
            } else if (currentPath === 'reg-calc') {
                showService('reg-choice');
            } else if (currentPath === 'card-calc') {
                showService('card-choice');
            }
        }

        function setType(t) {
            currentType = t;
            currentPath = 'reg-calc';
            document.getElementById('section-reg-choice').classList.add('hidden-section');
            document.getElementById('section-reg').classList.remove('hidden-section');
            document.getElementById('renewal-options').classList.toggle('hidden', t === 'new');
            calc();
        }

        function calc() {
            const grade = document.getElementById('grade').value;
            const years = parseInt(document.getElementById('years').value);
            const info = gradeData[grade];
            document.getElementById('req-capital').innerText = "RM " + parseInt(info.capital.replace(/,/g, '')).toLocaleString();
            document.getElementById('req-capacity').innerText = info.capacity === "NO LIMIT" ? "No Limit" : info.capacity;
            document.getElementById('req-docs').innerHTML = info.docs.map(d => `<li class='flex items-center bg-white/5 p-2 rounded-lg'><i class='fas fa-check-circle text-blue-500 mr-2'></i> ${d}</li>`).join('');
            document.getElementById('blacklist-fee-text').innerText = `+ RM ${info.blacklist.toLocaleString()} FEE`;
            
            let total = 0, breakdown = "";
            if (currentType === 'new') {
                total = info.new * years; breakdown = `${years} Year New Reg`;
            } else {
                let ccdCost = (years * 40 / 20) * 350;
                total = (info.renew * years) + ccdCost;
                breakdown = `${years} Yr Renewal + CCD`;
                if (document.getElementById('score').checked) { total += 350; breakdown += " + Score"; }
                if (document.getElementById('cims-recovery').checked) { total += 200; breakdown += " + ID Recovery"; }
                if (document.getElementById('blacklist').checked) { total += info.blacklist; breakdown += " + Blacklist"; }
            }
            document.getElementById('price-display').innerText = "RM " + Math.round(total).toLocaleString();
            document.getElementById('breakdown-text').innerText = breakdown;
            document.getElementById('wa-button').href = `https://wa.me/${phone}?text=CIDB Inquiry: ${currentType} ${grade} (${breakdown}) Total: RM${total}`;
        }

        function setGCType(t) {
            gcType = t;
            currentPath = 'card-calc';
            document.getElementById('section-card-choice').classList.add('hidden-section');
            document.getElementById('section-card').classList.remove('hidden-section');
            document.getElementById('gc-title').innerText = t === 'local' ? "Local Personnel" : "Foreign Personnel";
            document.getElementById('gc-qty-box').classList.toggle('hidden-section', t === 'local');
            document.getElementById('gc-years-box').classList.toggle('hidden-section', t === 'foreign');
            calcGC();
        }

        function calcGC() {
            let base = 0, total = 0, desc = "", discInfo = document.getElementById('gc-discount-calc');
            discInfo.classList.add('hidden');

            if (gcType === 'local') {
                const y = parseInt(document.getElementById('gc-years').value);
                total = 150 * y; desc = `Local Card (${y} Year)`;
            } else {
                const q = parseInt(document.getElementById('gc-qty').value) || 1;
                base = 125 * q;
                total = base;
                if (q >= 13) {
                    total = base * 0.88;
                    showDiscount(base, total, "12% Corporate Discount");
                } else if (q >= 5) {
                    total = base * 0.92;
                    showDiscount(base, total, "8% Bulk Discount");
                }
                desc = `${q} Foreign Worker Processing`;
            }
            
            if (document.getElementById('gc-recovery').checked) {
                total += 200;
                desc += " + ID Recovery";
            }

            document.getElementById('gc-price').innerText = "RM " + Math.round(total).toLocaleString();
            document.getElementById('gc-desc').innerText = desc;
            document.getElementById('wa-button-gc').href = `https://wa.me/${phone}?text=Green Card Inquiry: ${desc} Total: RM${Math.round(total)}`;
        }

        function showDiscount(oldP, newP, label) {
            const discBox = document.getElementById('gc-discount-calc');
            discBox.classList.remove('hidden');
            document.getElementById('gc-old-price').innerText = "Normal Price: RM " + oldP;
            document.getElementById('gc-savings-text').innerText = `${label} (-RM ${Math.round(oldP - newP)})`;
        }

        window.onload = () => { calc(); calcGC(); };
    </script>
</body>
</html>


