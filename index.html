<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Smart CIDB Portal | Fast Green Card & License Specialist</title>
    <meta name="description" content="Malaysia's fastest CIDB Specialist. New registration in 3 days, Green Card in hours. Professional G1-G7 Registration and Renewal.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        
        body { 
            background-color: #020617; 
            font-family: 'Plus Jakarta Sans', sans-serif;
            color: white;
            overflow-x: hidden;
        }

        .tech-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, #0f172a 0%, #020617 100%);
            z-index: -1;
        }

        .tech-bg::after {
            content: "";
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: linear-gradient(rgba(59, 130, 246, 0.05) 1px, transparent 1px), 
                              linear-gradient(90deg, rgba(59, 130, 246, 0.05) 1px, transparent 1px);
            background-size: 30px 30px;
        }

        .glass-card { 
            background: rgba(15, 23, 42, 0.8); 
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 28px; 
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); 
        }

        .selection-card {
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.05);
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.4), rgba(15, 23, 42, 0.9));
        }

        .selection-card:hover {
            transform: translateY(-5px);
            border-color: #3b82f6;
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.2);
        }

        .status-dot {
            height: 8px; width: 8px; background-color: #22c55e;
            border-radius: 50%; display: inline-block;
            margin-right: 6px; animation: blink 1.5s infinite;
        }

        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }

        .price-glow { text-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
        .hidden-section { display: none; }
        
        select, input { background-color: #0f172a !important; color: white !important; border: 1px solid #334155 !important; }
    </style>
</head>
<body class="p-4 md:p-10">
    <div class="tech-bg"></div>

    <div class="max-w-4xl mx-auto flex justify-end mb-4">
        <div class="bg-slate-900/80 border border-white/10 px-4 py-2 rounded-full text-[10px] font-bold tracking-widest uppercase flex items-center">
            <span class="status-dot"></span> Online Support Active
        </div>
    </div>

    <header id="selection-screen" class="max-w-4xl mx-auto py-6 relative z-10">
        <div class="text-center mb-12">
            <h1 class="text-6xl md:text-8xl font-extrabold text-white mb-4 tracking-tighter">
                SMART<span class="text-blue-500 italic">CIDB</span>
            </h1>
            <p class="text-slate-400 text-lg md:text-xl max-w-2xl mx-auto">
                Authorized compliance specialist for Malaysian contractors. 
                <span class="text-white font-semibold">Fast, Professional & Reliable.</span>
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div onclick="showService('reg-choice')" class="selection-card p-10 rounded-[35px] text-center group">
                <div class="w-16 h-16 bg-blue-500/10 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:bg-blue-500/20 transition">
                    <i class="fas fa-layer-group text-3xl text-blue-500"></i>
                </div>
                <h2 class="text-2xl font-black mb-2 tracking-tight">Contractor License</h2>
                <p class="text-sm text-slate-500 uppercase tracking-widest font-bold">Grade G1 to G7 Specialist</p>
            </div>

            <div onclick="showService('card-choice')" class="selection-card p-10 rounded-[35px] text-center group">
                <div class="w-16 h-16 bg-emerald-500/10 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:bg-emerald-500/20 transition">
                    <i class="fas fa-id-badge text-3xl text-emerald-500"></i>
                </div>
                <h2 class="text-2xl font-black mb-2 tracking-tight">Green Card</h2>
                <p class="text-sm text-slate-500 uppercase tracking-widest font-bold">Personnel Registration</p>
            </div>
        </div>

        <div class="mt-16 grid grid-cols-2 md:grid-cols-4 gap-4 opacity-50 grayscale hover:grayscale-0 transition duration-500">
            <div class="text-center p-4"><i class="fas fa-bolt mb-2"></i><p class="text-[10px] font-bold">FAST TRACK</p></div>
            <div class="text-center p-4"><i class="fas fa-shield-alt mb-2"></i><p class="text-[10px] font-bold">SECURE DATA</p></div>
            <div class="text-center p-4"><i class="fas fa-headset mb-2"></i><p class="text-[10px] font-bold">24/7 SUPPORT</p></div>
            <div class="text-center p-4"><i class="fas fa-check-double mb-2"></i><p class="text-[10px] font-bold">CIDB VERIFIED</p></div>
        </div>
    </header>

    <main id="service-container" class="max-w-xl mx-auto hidden-section relative z-10">
        <button onclick="goBack()" class="mb-6 text-slate-400 hover:text-white transition flex items-center font-bold uppercase text-[10px] tracking-widest">
            <i class="fas fa-arrow-left mr-2"></i> Go Back
        </button>

        <section id="section-reg-choice" class="hidden-section space-y-4">
            <div onclick="setType('new')" class="selection-card p-8 rounded-[28px] flex items-center justify-between group">
                <span class="text-xl font-bold">New Company Registration</span>
                <i class="fas fa-plus text-blue-500 opacity-0 group-hover:opacity-100 transition"></i>
            </div>
            <div onclick="setType('renew')" class="selection-card p-8 rounded-[28px] flex items-center justify-between group">
                <span class="text-xl font-bold">License Renewal Service</span>
                <i class="fas fa-sync text-blue-500 opacity-0 group-hover:opacity-100 transition"></i>
            </div>
        </section>

        <section id="section-card-choice" class="hidden-section space-y-4">
            <div onclick="setGCType('local')" class="selection-card p-8 rounded-[28px] flex items-center justify-between group">
                <span class="text-xl font-bold">Local Personnel (MyKad)</span>
                <i class="fas fa-user-check text-emerald-500 opacity-0 group-hover:opacity-100 transition"></i>
            </div>
            <div onclick="setGCType('foreign')" class="selection-card p-8 rounded-[28px] flex items-center justify-between group">
                <span class="text-xl font-bold">Foreign Worker (Passport)</span>
                <i class="fas fa-globe text-emerald-500 opacity-0 group-hover:opacity-100 transition"></i>
            </div>
        </section>

        <article id="section-reg" class="glass-card overflow-hidden hidden-section">
            <div class="p-6 md:p-8">
                <div class="mb-6">
                    <label class="text-[10px] font-bold text-slate-500 uppercase mb-2 block">Select Grade</label>
                    <select id="grade" onchange="calc()" class="w-full p-4 rounded-xl text-xl font-black shadow-inner"></select>
                </div>

                <div class="grid grid-cols-2 gap-3 mb-6 text-center">
                    <div class="p-4 bg-slate-900/80 rounded-2xl border border-white/5">
                        <p class="text-[9px] text-blue-400 font-black uppercase">Capital Req.</p>
                        <p id="req-capital" class="font-black text-white text-md">RM 0</p>
                    </div>
                    <div class="p-4 bg-slate-900/80 rounded-2xl border border-white/5">
                        <p class="text-[9px] text-emerald-400 font-black uppercase">Project Limit</p>
                        <p id="req-capacity" class="font-black text-white text-md">RM 0</p>
                    </div>
                </div>

                <div class="space-y-4 mb-8">
                    <select id="years" onchange="calc()" class="w-full p-4 rounded-xl font-bold border-slate-700"></select>
                    <div id="renewal-options" class="space-y-3">
                        <label class="flex items-center p-4 bg-white/5 rounded-2xl border border-white/10 cursor-pointer hover:bg-white/10 transition">
                            <input type="checkbox" id="score" onchange="calc()" class="w-5 h-5 accent-blue-500">
                            <div class="ml-4"><span class="block font-bold text-sm text-slate-200">Processing Score Cert</span></div>
                        </label>
                        <label class="flex items-center p-4 bg-white/5 rounded-2xl border border-white/10 cursor-pointer hover:bg-white/10 transition">
                            <input type="checkbox" id="cims-recovery" onchange="calc()" class="w-5 h-5 accent-blue-500">
                            <div class="ml-4"><span class="block font-bold text-sm text-slate-200">CIMS ID Recovery</span></div>
                        </label>
                        <label class="flex items-center p-4 bg-white/5 rounded-2xl border border-white/10 cursor-pointer hover:bg-white/10 transition">
                            <input type="checkbox" id="blacklist" onchange="calc()" class="w-5 h-5 accent-red-500">
                            <div class="ml-4"><span class="block font-bold text-sm text-slate-200">Blacklist Check</span></div>
                        </label>
                    </div>
                </div>

                <div class="mb-6">
                    <p class="text-[10px] font-black text-blue-400 uppercase tracking-widest mb-3">Timeline & Documents</p>
                    <div class="flex items-center mb-4 text-sm font-bold bg-blue-500/10 p-3 rounded-lg border border-blue-500/20">
                        <i class="fas fa-clock mr-3 text-blue-400"></i> <span id="reg-time"></span>
                    </div>
                    <ul id="req-docs" class="space-y-2 text-[11px] text-slate-400 font-semibold"></ul>
                </div>

                <div class="bg-blue-600 rounded-3xl p-8 text-center shadow-lg">
                    <p class="text-blue-100 text-[10px] font-black uppercase mb-1">Total Estimated Fee</p>
                    <div id="price-display" class="text-5xl font-black text-white price-glow tracking-tighter">RM 0</div>
                    <p id="breakdown-text" class="text-blue-200 text-[10px] font-bold mt-2 uppercase"></p>
                </div>

                <a href="#" id="wa-button" class="w-full mt-4 flex items-center justify-center bg-green-500 hover:bg-green-600 text-white font-black py-5 rounded-[20px] text-xl transition-all">
                    <i class="fab fa-whatsapp text-2xl mr-3"></i> Get Started Now
                </a>
            </div>
        </article>

        <article id="section-card" class="glass-card p-6 md:p-8 hidden-section">
            <h2 id="gc-title" class="text-3xl font-black text-center mb-8 italic text-emerald-500"></h2>
            
            <div class="space-y-6">
                <div id="gc-qty-box" class="hidden-section">
                    <label class="text-[10px] font-black text-slate-500 uppercase mb-2 block tracking-widest">Number of Staff</label>
                    <input type="number" id="gc-qty" value="1" min="1" oninput="calcGC()" class="w-full p-4 rounded-xl text-2xl font-black">
                </div>

                <div id="gc-years-box">
                    <label class="text-[10px] font-black text-slate-500 uppercase mb-2 block tracking-widest">Renew For</label>
                    <select id="gc-years" onchange="calcGC()" class="w-full p-4 rounded-xl font-bold"></select>
                </div>

                <label class="flex items-center p-4 bg-white/5 rounded-2xl border border-white/10 cursor-pointer">
                    <input type="checkbox" id="gc-recovery" onchange="calcGC()" class="w-5 h-5 accent-emerald-500">
                    <span class="ml-4 font-bold text-sm text-slate-200">Account Recovery Assistance</span>
                </label>

                <div class="bg-emerald-600 rounded-3xl p-8 text-center shadow-lg">
                    <div id="gc-discount-calc" class="hidden mb-2">
                        <p class="text-[10px] text-emerald-200 line-through opacity-70" id="gc-old-price"></p>
                        <p class="text-[11px] text-white font-black" id="gc-savings-text"></p>
                    </div>
                    <p class="text-emerald-100 text-[10px] font-black uppercase mb-1">Service Fee</p>
                    <div id="gc-price" class="text-5xl font-black text-white tracking-tighter">RM 0</div>
                    <p id="gc-desc" class="text-emerald-200 text-[10px] font-bold mt-2 uppercase"></p>
                </div>

                <a href="#" id="wa-button-gc" class="w-full flex items-center justify-center bg-green-500 hover:bg-green-600 text-white font-black py-5 rounded-[20px] text-xl transition-all">
                    <i class="fab fa-whatsapp text-2xl mr-3"></i> Process My Card
                </a>
            </div>
        </article>
    </main>

    <div class="fixed bottom-6 right-6 z-50 md:hidden">
        <a id="mobile-wa" href="#" class="bg-green-500 w-14 h-14 rounded-full flex items-center justify-center shadow-2xl border-2 border-white/20">
            <i class="fab fa-whatsapp text-2xl text-white"></i>
        </a>
    </div>

    <script>
        // Logic remains exactly as your original code to ensure RM values are correct
        const phone = "60123420658";
        let currentPath = 'root'; let currentType = 'new', gcType = 'local';
        const gradeData = {
            "G1": { new: 255, renew: 320, capital: "5,000", capacity: "200,000", blacklist: 700, docs: ["Director MyKad Copy", "SSM Business Profile", "Latest Bank Statement"] },
            "G2": { new: 575, renew: 510, capital: "25,000", capacity: "500,000", blacklist: 700, docs: ["Director MyKad Copy", "SSM Business Profile", "Latest Bank Statement"] },
            "G3": { new: 1015, renew: 695, capital: "50,000", capacity: "1 Million", blacklist: 700, docs: ["Director MyKad Copy", "SSM Business Profile", "Latest Bank Statement"] },
            "G4": { new: 1450, renew: 910, capital: "150,000", capacity: "3 Million", blacklist: 950, docs: ["Director MyKad Copy", "SSM Business Profile", "Latest Bank Statement"] },
            "G5": { new: 2060, renew: 970, capital: "250,000", capacity: "5 Million", blacklist: 1500, docs: ["Director MyKad Copy", "SSM Full Set", "Latest Bank Statement", "Technical Personnel"] },
            "G6": { new: 2665, renew: 1210, capital: "500,000", capacity: "10 Million", blacklist: 2000, docs: ["Director MyKad Copy", "SSM Full Set", "Latest Bank Statement", "Technical Personnel"] },
            "G7": { new: 3025, renew: 1815, capital: "750,000", capacity: "NO LIMIT", blacklist: 2000, docs: ["Director MyKad Copy", "SSM Full Set", "Latest Bank Statement", "2x Tech Personnel"] }
        };

        // Populate Selects
        const gradeSel = document.getElementById('grade');
        Object.keys(gradeData).forEach(g => { let opt = document.createElement('option'); opt.value = g; opt.text = "GRADE " + g; gradeSel.add(opt); });
        const yearSel = document.getElementById('years');
        [1,2,3].forEach(y => { let opt = document.createElement('option'); opt.value = y; opt.text = y + " Year Period"; yearSel.add(opt); });
        const gcYearSel = document.getElementById('gc-years');
        [1,2,3,4,5].forEach(y => { let opt = document.createElement('option'); opt.value = y; opt.text = y + " Year Validity"; gcYearSel.add(opt); });

        function showService(s) {
            document.getElementById('selection-screen').classList.add('hidden-section');
            document.getElementById('service-container').classList.remove('hidden-section');
            document.getElementById('section-reg-choice').classList.toggle('hidden-section', s !== 'reg-choice');
            document.getElementById('section-card-choice').classList.toggle('hidden-section', s !== 'card-choice');
            document.getElementById('section-reg').classList.add('hidden-section');
            document.getElementById('section-card').classList.add('hidden-section');
            currentPath = s;
        }

        function goBack() {
            if (currentPath === 'reg-choice' || currentPath === 'card-choice') {
                document.getElementById('selection-screen').classList.remove('hidden-section');
                document.getElementById('service-container').classList.add('hidden-section');
                currentPath = 'root';
            } else { showService(currentPath.includes('reg') ? 'reg-choice' : 'card-choice'); }
        }

        function setType(t) {
            currentType = t; currentPath = 'reg-calc';
            document.getElementById('section-reg-choice').classList.add('hidden-section');
            document.getElementById('section-reg').classList.remove('hidden-section');
            document.getElementById('renewal-options').classList.toggle('hidden', t === 'new');
            document.getElementById('reg-time').innerText = (t === 'new') ? "Fast Track: 3-4 Working Days" : "Standard: Approx. 1 Week";
            calc();
        }

        function calc() {
            const grade = document.getElementById('grade').value;
            const years = parseInt(document.getElementById('years').value);
            const info = gradeData[grade];
            document.getElementById('req-capital').innerText = "RM " + parseInt(info.capital.replace(/,/g, '')).toLocaleString();
            document.getElementById('req-capacity').innerText = info.capacity === "NO LIMIT" ? "No Limit" : "RM " + info.capacity;
            document.getElementById('req-docs').innerHTML = info.docs.map(d => `<li class='flex items-center'><i class='fas fa-check text-blue-500 mr-2'></i> ${d}</li>`).join('');
            
            let total = 0, breakdown = "";
            if (currentType === 'new') { total = info.new * years; breakdown = `${years} Year New Reg`; }
            else {
                let ccdCost = (years * 40 / 20) * 350; total = (info.renew * years) + ccdCost;
                breakdown = `${years} Yr Renewal + CCD`;
                if (document.getElementById('score').checked) { total += 350; breakdown += " + Score"; }
                if (document.getElementById('cims-recovery').checked) { total += 200; breakdown += " + Recovery"; }
                if (document.getElementById('blacklist').checked) { total += info.blacklist; breakdown += " + Blacklist"; }
            }
            document.getElementById('price-display').innerText = "RM " + Math.round(total).toLocaleString();
            document.getElementById('breakdown-text').innerText = breakdown;
            const msg = `Inquiry: ${currentType} Grade ${grade} (${breakdown}) Total: RM${total}`;
            document.getElementById('wa-button').href = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
            document.getElementById('mobile-wa').href = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
        }

        function setGCType(t) {
            gcType = t; currentPath = 'card-calc';
            document.getElementById('section-card-choice').classList.add('hidden-section');
            document.getElementById('section-card').classList.remove('hidden-section');
            document.getElementById('gc-title').innerText = t === 'local' ? "Local Green Card" : "Foreign Green Card";
            document.getElementById('gc-qty-box').classList.toggle('hidden-section', t === 'local');
            document.getElementById('gc-years-box').classList.toggle('hidden-section', t === 'foreign');
            calcGC();
        }

        function calcGC() {
            let total = 0, desc = "";
            const discInfo = document.getElementById('gc-discount-calc');
            discInfo.classList.add('hidden');

            if (gcType === 'local') {
                const y = parseInt(document.getElementById('gc-years').value);
                total = 150 * y; desc = `Local Card (${y} Year)`;
            } else {
                const q = parseInt(document.getElementById('gc-qty').value) || 1;
                let base = 125 * q; total = base;
                if (q >= 13) { total = base * 0.88; showDiscount(base, total, "12% Corporate Saving"); }
                else if (q >= 5) { total = base * 0.92; showDiscount(base, total, "8% Bulk Saving"); }
                desc = `${q} Foreign Workers`;
            }
            if (document.getElementById('gc-recovery').checked) { total += 200; desc += " + Recovery"; }
            document.getElementById('gc-price').innerText = "RM " + Math.round(total).toLocaleString();
            document.getElementById('gc-desc').innerText = desc;
            const msg = `Green Card Inquiry: ${desc} Total: RM${Math.round(total)}`;
            document.getElementById('wa-button-gc').href = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
            document.getElementById('mobile-wa').href = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
        }

        function showDiscount(o, n, l) {
            document.getElementById('gc-discount-calc').classList.remove('hidden');
            document.getElementById('gc-old-price').innerText = "RM " + o;
            document.getElementById('gc-savings-text').innerText = l;
        }

        window.onload = () => { calc(); calcGC(); document.getElementById('mobile-wa').href = `https://wa.me/${phone}`; };
    </script>
</body>
</html>
